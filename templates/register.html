{% extends "base.html" %}

{% block content %}
{% load socialaccount %}
{% load static %}

<div class="roboto">
{% if user.is_authenticated %}
    {# Content for authenticated users #}

        <a class="nav-link d-flex justify-content-end {% if request.path == logout_url %}active{% endif %}" aria-current="page" href="{% url 'account_logout' %}">Logout</a>

    {% for post in UserProfileDash %}
    <div class="container d-flex align-items-center justify-content-center">
        <div class="row">
            <div class="col-md-6">
                <!-- Your image display logic here -->
            </div>
            <div class="col-md-6">
                <div class="card text-center mb-3">
                    <div class="card-body">
                        <h5 class="card-title">{{ post.name }}</h5>
                        <p class="card-text">{{ post.bio }}</p>
                        <p class="card-text">{{ post.location }}</p>
                        <p class="card-text">{{ post.date_of_birth }}</p>
                        <p class="card-text">{{ post.address }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}


    {% if user.is_staff %}
        {# Content for admin users #}
        <div class="list-group card d-flex justify-content-center" style="width: 18rem;"">
            <a href="{% url 'product:new' %}" class="list-group-item list-group-item-action">New Item</a>
            <a href="#" class="list-group-item list-group-item-action">Edit Item</a>
            <a href="#" class="list-group-item list-group-item-action">Remove Item</a>
        </div>
    {% endif %}
{% else %}
    <!-- Content for non-authenticated users -->
    <div class="container text-center roboto">
        <div class="row">
            <div class="col-6">
                <form method="post" action="{% url 'account_login' %}" class="pt-1">
                    {% csrf_token %}
                    {% if redirect_field_value %}
                        <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}"/>
                    {% endif %}
                    <p class="form-text error-text">
                        {{ form.non_field_errors.as_text }}
                    </p>
                    <div class="mb-4">
                        <label for="id_login" class="form-label">Username</label>
                        <input type="text" class="form-control shadow-none p-3" id="id_login" aria-describedby="usernameHelp"
                               placeholder="Your username" name="login">
                        <p id="usernameHelp" class="form-text error-text">
                            {{ form.login.errors.as_text }}
                        </p>
                    </div>
                    <div class="mb-4">
                        <label for="id_password" class="form-label">Password</label>
                        <input type="password" class="form-control shadow-none p-3" id="id_password" aria-describedby="passwordHelp"
                               placeholder="At least 8 characters or more" name="password">
                        <p id="passwordHelp" class="form-text error-text">
                            {{ form.password.errors.as_text }}
                        </p>
                    </div>
                    <div class="d-flex justify-content-between align-items-center mb-5" style="max-width: 400px">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value=""
                                   name="remember" id="id_remember">
                            <label class="form-check-label remember-text" for="id_remember">
                                Remember me
                            </label>
                        </div>
                    </div>
                    <div class="d-grid gap-2 col-6 mx-auto">
                        <button class=" btn btn-primary" type="submit" id="loginButton">Sign In</button>
                      </div>
                </form>
            </div>
            <div class="col-6">
                <p>Or</p>
                <button class="gsi-material-button">
                    <!-- ... (Google sign-up button HTML) ... -->
                    <span class="gsi-material-button-contents"><a href="{% provider_login_url 'google' %}">Sign up with Google</a></span>
                    <span style="display: none;">Sign in with Google</span>
                </button>
            </div>
        </div>
    </div>

    <div class="account-help roboto">
        <div>
            <a href="{% url 'account_reset_password' %}" class="small text-right reset-password-text d-flex justify-content-center">
                Forgotten your password?
            </a>
        </div>
        <div class="signup-container d-flex justify-content-center">
            <h5>Don't have an account? Register
                <a class="{% if request.path == '/accounts/register/' %}active{% endif %}" aria-current="page" href="{% url 'account_signup' %}"> Here</a>
            </h5>
        </div>
    </div>
{% endif %}
</div>

{% endblock %}
